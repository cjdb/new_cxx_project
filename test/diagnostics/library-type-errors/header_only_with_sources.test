RUN: %rm %t
RUN: %new-project %t/library_type_error --author='new-c++-project Test Suite'
RUN: echo 'cxx_library(TARGET header_only SOURCES hello.cpp LIBRARY_TYPE HEADER_ONLY)' > %t/library_type_error/source/CMakeLists.txt
RUN: cmake -S %t/library_type_error -B %t/build -GNinja -DCMAKE_BUILD_TYPE=Debug >%t/actual_error 2>&1 || %expect-error
RUN: FileCheck --input-file=%t/actual_error %s

CHECK:      CMake Error at config/cmake/detail/add_targets.cmake:{{[0-9]+}} (message):
CHECK-NEXT:   cxx_library 'header_only' is marked as 'HEADER_ONLY', but also defines
CHECK-NEXT:   content for 'SOURCES'
CHECK-NEXT: Call Stack (most recent call first):
CHECK-NEXT:   config/cmake/detail/add_targets.cmake:{{[0-9]+}} (check_library_type)
CHECK-NEXT:   source/CMakeLists.txt:1 (cxx_library)
CHECK:      -- Configuring incomplete, errors occurred!
